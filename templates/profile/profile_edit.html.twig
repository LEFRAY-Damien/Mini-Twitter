{% extends 'base.html.twig' %}

{% block title %}Modifier le profil{% endblock %}

{% block body %}

<div class="min-h-screen bg-[#15202B] py-10">

  <div class="max-w-3xl mx-auto bg-[#192734] rounded-2xl shadow-lg px-8 pb-10 text-white">

<h1 class="text-2xl font-bold text-center pt-4 mt-6 mb-8 text-white">Modifier le profil</h1>

{% for message in app.flashes('success') %}
  <div class="mb-4 bg-green-900/30 border border-green-500 text-green-400 p-3 rounded-lg text-center">
    {{ message }}
  </div>
{% endfor %}

{{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}

<div>
  {{ form_label(form.username, null, {'label_attr': {'class': 'block font-semibold text-gray-300'}}) }}
  {{ form_widget(form.username, {'attr': {'class': 'w-full mt-1 px-3 py-2 bg-[#15202B] border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#1DA1F2]'}}) }}
  {{ form_errors(form.username) }}
</div>

<div>
  {{ form_label(form.email, null, {'label_attr': {'class': 'block font-semibold text-gray-300'}}) }}
  {{ form_widget(form.email, {'attr': {'class': 'w-full mt-1 px-3 py-2 bg-[#15202B] border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-[#1DA1F2]'}}) }}
  {{ form_errors(form.email) }}
</div>

{% set avatarField = form.avatar %}
<div class="mt-4 flex items-center space-x-4">
  <img id="avatarPreview"
       src="{{ asset(user.avatar ? 'uploads/avatars/' ~ user.avatar : 'images/default-avatar.png') }}"
       alt="Avatar"
       class="w-24 h-24 rounded-full border-2 border-gray-300 shadow-md object-cover">

  <div class="flex-1">
    {{ form_label(avatarField, null, {'label_attr': {'class': 'block font-semibold text-gray-300'}}) }}
    {{ form_widget(avatarField, {'attr': {'id': 'avatarInput', 'class': 'text-gray-300'}}) }}
    {{ form_errors(avatarField) }}
  </div>
</div>

<div class="flex justify-end space-x-2 mt-6">
  <button type="submit" class="bg-[#1DA1F2] hover:bg-blue-500 text-white px-4 py-2 rounded-lg shadow transition">
    Enregistrer
  </button>
  <a href="{{ path('app_profile') }}"
     class="border border-gray-600 text-gray-300 px-4 py-2 rounded-lg hover:bg-[#1DA1F2]/10 transition">
    Annuler
  </a>
</div>

{{ form_end(form) }}


  </div>
</div>
{% endblock %}
