{% extends 'base.html.twig' %}

{% block title %}Profil
{% endblock %}

{% block body %}
	<div class="min-h-screen bg-[#15202B] py-4">

		<div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-lg overflow-hidden">

			<div class="h-40 bg-gradient-to-r from-blue-500 to-indigo-600 relative">
				<div class="absolute -bottom-12 left-1/2 transform -translate-x-1/2">
					<img src="{{ asset(user.avatar ? 'uploads/avatars/' ~ user.avatar : 'images/default-avatar.png') }}" alt="Avatar" class="w-24 h-24 rounded-full border-4 border-white shadow-md object-cover">
				</div>
			</div>

			<div class="mt-16 px-8 pb-10 text-center">
				<h1 class="text-2xl font-bold text-gray-800">{{ user.username }}</h1>
				<p class="text-gray-500">{{ user.email }}</p>


				{% if app.user and app.user.id == user.id %}
					<div class="mt-6 flex justify-center">
						<a href="{{ path('app_profile_edit') }}" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg shadow transition">
							Modifier
						</a>
					</div>
				{% endif %}

			</div>
		</div>

		<div class="w-1/3 m-auto mt-3">
			<ul class="hidden text-sm font-medium text-center text-gray-500 rounded-lg shadow-sm sm:flex dark:divide-gray-700 dark:text-gray-400">
				<li class="w-full focus-within:z-10">
					<a href="{{path('app_profile_tweets', {'id': user.id})}}" class="inline-block w-full py-4 bg-white border-s-0 border-gray-200 dark:border-gray-700 rounded-s-lg hover:text-gray-700 hover:bg-gray-50 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700" aria-current="page">Tweets</a>
				</li>
				<li class="w-full focus-within:z-10">
					<a href="{{path('app_profile_retweets', {'id': user.id})}}" class="inline-block w-full py-4 text-[#1DA1F2] bg-gray-100 border-r border-gray-200 dark:border-gray-700 rounded-e-lg focus:ring-4 focus:ring-blue-300 active focus:outline-none dark:bg-gray-700">Retweets</a>
				</li>
			</ul>
		</div>

		<div class="absolute left-1/2 transform -translate-x-1/2">
			{% for retweet in user.retweets %}

				<div class="relative p-4 bg-[#15202B] text-white border-x border-b first:border-t border-neutral-700 w-130 hover:bg-[#192734] transition">
					<div class="flex items-center text-neutral-400">
						<i class="icon-repeat-2 mr-1"></i>
						<span>{{user.username}}
							a retweeté</span>
					</div>
					<div class="flex justify-between items-start">
						<div>
							<span class="font-bold">{{ retweet.tweet.user.username }}</span>
							<span class="text-neutral-500">·</span>
							<span class="text-neutral-400">{{ retweet.tweet.createdAt|date('d/m/Y H:i', "Europe/Paris") }}</span>
						</div>
					</div>

					<div class="pt-3">
						<p>{{ retweet.tweet.content }}</p>
					</div>

					{% if retweet.tweet.media %}

						<img src="{{ asset('uploads/media/' ~ retweet.tweet.media) }}" class="mt-3 rounded-md">

					{% endif %}
				</div>
			{% endfor %}
		</div>
	</div>

{% endblock %}
