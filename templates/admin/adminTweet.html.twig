{% extends 'base.html.twig' %}

{% block body %}

<div class="min-h-screen bg-[#15202B] p-6 ">
    <h1 class="text-2xl font-bold text-white mb-6">Signalements récents</h1>


    <div class="w-full overflow-x-auto">
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="border-b border-neutram-700 bg-[#192734]">
                    <th class="p-3 text-white font-semibold">Utilisateurs</th>
                    <th class="p-3 text-white font-semibold">Tweets</th>
                    <th class="p-3 text-white font-semibold">Raison</th>
                    <th class="p-3 text-white font-semibold">Crée le</th>
                    <th class="p-3 text-white font-semibold">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% if reports is not empty %}
                {% for r in reports %}
                <tr class="border-b border-neutral-700 hover:bg-[#192734] transition-colors">
                    <td class="p-3 text-white">{{ r.reported.username }}</td>
                    <td class="p-3 text-white">{{ r.tweet.content }}</td>
                    <td class="p-3 text-white">{{ r.reason }}</td>
                    <td class="p-3 text-white">{{ r.createdAt|date('d/m/Y H:i') }}</td>
                    <td class="p-3 flex space-x-2">
                        <form action="{{ path('app_admin_delete_report', {id: r.id})}}" method="post"
                            onsubmit="return confirm('Voulez-vous supprimer le report ?');">

                            <button type="submit"
                                class="px-3 py-1 bg-[#192734] text-white border border-[#1DA1F2] rounded hover:text-[#1DA1F2] hover:bg-[#1DA1F2] transition-colors">
                                Supprimer le report
                            </button>


                        </form>
                        <form action="{{ path('app_admin_delete_tweet', {id: r.tweet.id })}}" method="post"
                            onsubmit="return confirm('Voulez-vous supprimer le tweet ?');">
                            <button type="submit"
                                class="px-3 py-1 bg-[#15202B] text-white border border-[#1DA1F2] rounded hover:bg-[#1DA1F2] hover:text-[#15202B] transition">
                                Supprimer tweet
                            </button>
                        </form>

                        <form action="{{ path('app_tweet_show', {id: r.tweet.id })}}">
                            <button type="submit"
                                class="px-3 py-1 bg-[#15202B] text-white border border-[#1DA1F2] rounded hover:bg-[#1DA1F2] hover:text-[#15202B] transition">
                                Voir le tweet
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}

                {% else %}
                <div class="text-neutral-400 mt-10">
                    Aucun signalement trouvé...
                </div>
                {% endif %}
            </tbody>
        </table>
    </div>

</div>
{% endblock %}