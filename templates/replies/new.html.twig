{% extends 'base.html.twig' %}

{% block title %}Répondre à
	{{tweet.user.username}}
{% endblock %}

{% block body %}
	<div class="absolute left-1/3 max-w-2xl space-y-4">
		<div class="mb-3 p-4 bg-[#15202B] border border-neutral-700 rounded-xl hover:bg-[#192734] transition">
			<div class="flex justify-between items-start">
				<div class="flex items-center space-x-3">
					<img src="{{ asset(tweet.user.avatar ? 'uploads/avatars/' ~ tweet.user.avatar : 'images/default-avatar.png') }}" alt="{{ tweet.user.username }}" class="w-10 h-10 rounded-full border-2 border-[#1DA1F2] object-cover">
					<div>
						<a href="{{ path('app_profile_view', {'id': tweet.user.id}) }}" class="font-bold hover:text-[#1DA1F2] transition">
							{{ tweet.user.username }}
						</a>
						<p class="text-neutral-400 text-sm">{{ tweet.createdAt|date('d/m/Y H:i', "Europe/Paris") }}</p>
					</div>
				</div>
			</div>
			<div class="pt-3">
				<p>{{ tweet.content }}</p>
			</div>

			{% if tweet.media %}
				<img src="{{ asset('uploads/media/' ~ tweet.media) }}" class="mt-3 rounded-md">
			{% endif %}
		</div>

		{% if form.vars.errors|length > 0 %}
			<div class="mb-4 p-3 rounded-lg bg-red-500/20 border border-red-500 text-red-300">
				<ul class="list-disc list-inside">
					{% for error in form.vars.errors %}
						<li>{{ error.message }}</li>
					{% endfor %}
				</ul>
			</div>
		{% endif %}

		{{ include('replies/_form.html.twig') }}

		{% for reply in tweet.replies %}

			<div class="mt-6 p-4 bg-[#15202B] border border-neutral-700 rounded-xl hover:bg-[#192734] transition">
				<div class="flex justify-between items-start">
					<div class="flex items-center space-x-3">
						<img src="{{ asset(reply.user.avatar ? 'uploads/avatars/' ~ reply.user.avatar : 'images/default-avatar.png') }}" alt="{{ reply.user.username }}" class="w-10 h-10 rounded-full border-2 border-[#1DA1F2] object-cover">
						<div>
							<a href="{{ path('app_profile_view', {'id': tweet.user.id}) }}" class="font-bold hover:text-[#1DA1F2] transition">
								{{ reply.user.username }}
							</a>
							<p class="text-neutral-400 text-sm">{{ reply.createdAt|date('d/m/Y H:i', "Europe/Paris") }}</p>
						</div>
					</div>
				</div>
				<div class="pt-3">
					<p>{{ reply.content }}</p>
				</div>

				{# {% if reply.tweet.media %}
									<img src="{{ asset('uploads/media/' ~ reply.media) }}" class="mt-3 rounded-md">
								{% endif %} #}
			</div>

		{% endfor %}
	</div>
{% endblock %}
